<html>
    <head>
        <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
        <script type="text/javascript">
            google.charts.load('current', {'packages':['corechart']})

            let collatz = (n) => {
                let value = []
                let counts = []
                let count = 0

                while (n !== 1) {
                    value.push(n)
                    count++
                    counts.push(count)
                    if (n % 2 === 0) {
                        n = n / 2
                    } else {
                        n = n * 3 + 1
                    }
                }

                value.push(1)
                count++
                counts.push(count)

                return {
                    sequence: value,  
                    iterations: counts 
                }
            }

            let drawChart = () => {
                let resultado = collatz(24)

                let valores = resultado.sequence
                let iteraciones = resultado.iterations
                let dataDinamica = [['Valores', 'Iteraciones']]

                for (let i = 0; i < valores.length; i++) {
                    dataDinamica.push([iteraciones[i], valores[i]])
                }
                
                var data = google.visualization.arrayToDataTable(dataDinamica)
                var options = {
                    title: 'Grafico de Collatz',
                    curveType: 'function',
                    legend: { position: 'bottom' }
                };

                var chart = new google.visualization.LineChart(document.getElementById('curve_chart'))
                chart.draw(data, options)
            };

            // Llamar a la función drawChart una vez que Google Charts esté cargado
            google.charts.setOnLoadCallback(drawChart);
        </script>
    </head>
    <body>
        <div id="curve_chart" style="width: 900px; height: 500px"></div>
    </body>
</html>